<!DOCTYPE html>
<html>
<script>
	function computerPlay(){
		let number = Math.random();
		let hand = "ROCK";

		if (number<=0.33){
			hand = "PAPER";
		}else if (number <= 0.66){
			hand = "SCISSORS";
		}

		console.log(hand);
		return(hand);
	}

	function playerInput(){

		var tryAgain = false;
		var answer = "";
		var answerUppercase = "";

		do{

			if(tryAgain){
				answer = prompt("I couldn't recognise what you typed, please choose either rock, paper or scissors:");		
			}else{
				answer = prompt("Choose either rock, paper or scissors:");
			}

			if(answer == undefined){
				//cancel the program
				return("CANCEL");
			}

			answerUppercase = answer.toUpperCase();
			
			if(answerUppercase != "ROCK" && answerUppercase != "PAPER" && answerUppercase != "SCISSORS"){
				tryAgain = true;
			}else{
				tryAgain = false;
			}
			

		} while(tryAgain == true)

		return(answerUppercase)
	}


	function rockPaperScissors(playerInput, aiInput){

		if(playerInput == "CANCEL"){
			return("GAME CANCELLED")
		}

		var combinedSelections = playerInput+aiInput;

		switch(combinedSelections) {

			case "ROCKROCK":
				result = "DRAW"
				break;
			case "ROCKPAPER":
				result = "COMPUTER WINS"
				break;
			case "ROCKSCISSORS":
				result = "HUMAN WINS"
				break;
			case "PAPERROCK":
				result = "HUMAN WINS"
				break;
			case "PAPERPAPER":
				result = "DRAW"
				break;
			case "PAPERSCISSORS":
				result = "COMPUTER WINS"
				break;
			case "SCISSORSROCK":
				result = "COMPUTER WINS"
				break;
			case "SCISSORSPAPER":
				result = "HUMAN WINS"
				break;
			case "SCISSORSSCISSORS":
				result = "DRAW"
				break;
			
		}

		return(result)
		
	}

	function game(rounds = 5){

		var i = 0;
		var playerResult = "";
		var aiResult = "";
		var finalResult = "";
		var counter = 0;

		for (i;i<rounds;i++){

			playerResult = playerInput();
			aiResult = computerPlay();

			finalResult = rockPaperScissors(playerResult, aiResult);

			if (finalResult == "GAME CANCELLED"){
				return(finalResult);			
			} else if (finalResult == "COMPUTER WINS"){
				counter = counter - 1;
			} else if(finalResult == "HUMAN WINS"){
				counter = counter + 1;
			}

		}

		if(counter>0){
			return("HUMAN WINS BEST OF " + rounds);
		}else if(counter<0){
			return("HUMAN LOSES BEST OF " + rounds);
		}else{
			return("DRAW BEST OF " + rounds);
		}

	}


</script>
<head>
<body>
</body>
</head>
</html>
